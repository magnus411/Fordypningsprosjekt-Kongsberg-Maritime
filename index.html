<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensor Data Handler System: Meta Power Quad - Sensor Data Handler System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sensor Data Handler System<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">This file implements the main entry point and configuration setup for the  Kongsberg Maritime&#39;s sensor data handling system. The system is designed to  collect and store sensor data with flexible and modular configuration capabilities.\n \n This system can be configured to handle multiple data handlers, each with their  own thread group. The system is designed to be easily extensible and configurable  through JSON configuration files.\n \n Changes to the code can be made to extend the system&#39;s capabilities, such as adding protocols.  This system has built up a framework for adding new configurations later.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Meta Power Quad - Sensor Data Handler System </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Project Overview</h1>
<p>This project aims to develop a prototype exploring technical solutions for challenges in Kongsberg Maritime's Meta Power Quad datahandler. The main focus is demonstrating a flexible architecture that allows adding new sensors without code modifications or recompilation, while also implementing efficient fail safe mechanisms like data dumping, and null-data compression. The prototype will serve as a basis for decision-making in Kongsberg Maritime's future production system development and is not intended for production use.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
System Documentation</h1>
<p>Full system documentation generated with Doxygen is available at: <a href="https://magnus411.github.io/Fordypningsprosjekt-Kongsberg-Maritime/">https://magnus411.github.io/Fordypningsprosjekt/</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Installation &amp; Running the System</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Prerequisites</h2>
<ul>
<li>GCC compiler</li>
<li>PostgreSQL development libraries (<code>libpq-dev</code>)</li>
<li>Make</li>
<li>Docker and Docker Compose (optional)</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Option 1: Using Docker Compose</h2>
<ol type="1">
<li>Install Docker and Docker Compose</li>
</ol>
<p><a href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a> <br  />
 <a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p>
<ol type="1">
<li>Build and run the application:</li>
</ol>
<div class="fragment"><div class="line">#Building the docker</div>
<div class="line">docker-compose build</div>
<div class="line"> </div>
<div class="line">#Running the docker-compose</div>
<div class="line">docker-compose up</div>
</div><!-- fragment --><p>This will: </p><pre class="fragment">Start a PostgreSQL database container
Build and run the SensorDHS application
Set up the necessary network connections between containers
Mount the configuration files from your local configs directory
</pre><p> To stop the application:</p>
<div class="fragment"><div class="line">docker compose down</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
To connect to the database:</h3>
<div class="fragment"><div class="line">docker-compose exec db psql -U postgres fordypningsprosjekt</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Option 2: Building with Make</h2>
<ol type="1">
<li>Install required dependencies: <div class="fragment"><div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install gcc make libpq-dev</div>
</div><!-- fragment --></li>
<li>Build the project: <div class="fragment"><div class="line"># Default build (debug)</div>
<div class="line">make</div>
</div><!-- fragment --></li>
<li>Run the application: <div class="fragment"><div class="line">./build/SensorDHS</div>
</div><!-- fragment --></li>
</ol>
<p><b>Note:</b> This requires you to have a postgres database already running. This can be done with for example docker:</p>
<div class="fragment"><div class="line">docker run -d --name postgres-sensordb -p 5432:5432 -e POSTGRES_PASSWORD=passord -e POSTGRES_DB=fordypningsprosjekt postgres:14</div>
</div><!-- fragment --><p> You then need to configure the SensorDHS <code>postgres-conf</code> that is located inside the <code>configs</code>folder to use that postgres database.</p>
<p><b>Additional make commands</b>: </p><pre class="fragment">make clean: Remove build files
make docs: Generate documentation (requires Doxygen)
make format: Format code using clang-format
make lint: Run clang-tidy checks
make data_generator: Build the test data generator
</pre><h2><a class="anchor" id="autotoc_md8"></a>
Configuration</h2>
<p>The project comes with default configurations, but these can be changed.</p>
<ol type="1">
<li><code>postgres-conf</code>: Database connection settings <code>host=db dbname=fordypningsprosjekt user=postgres password=passord</code></li>
</ol>
<p><b>Note:</b> When using Docker, <code>host=db</code> refers to the Docker container hostname. For local builds, use <code>host=127.0.0.1</code> or your specific PostgreSQL host.</p>
<ol type="1">
<li><code>modbus-conf</code>: Modbus connection settings</li>
</ol>
<p>ipv4Addr=127.0.0.1 <br  />
 port=1312</p>
<ol type="1">
<li><code><a class="el" href="sdb__conf_8json.html">sdb_conf.json</a></code>: System configuration <div class="fragment"><div class="line">{</div>
<div class="line">  &quot;data_handlers&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;modbus_with_postgres&quot;,</div>
<div class="line">      &quot;enabled&quot;: true,</div>
<div class="line">      &quot;modbus&quot;: {</div>
<div class="line">        &quot;mem&quot;: &quot;8mB&quot;,</div>
<div class="line">        &quot;scratch_size&quot;: &quot;128kB&quot;</div>
<div class="line">      },</div>
<div class="line">      &quot;postgres&quot;: {</div>
<div class="line">        &quot;mem&quot;: &quot;8mB&quot;,</div>
<div class="line">        &quot;scratch_size&quot;: &quot;128kB&quot;</div>
<div class="line">      },</div>
<div class="line">      &quot;pipe&quot;: {</div>
<div class="line">        &quot;buf_count&quot;: 2,</div>
<div class="line">        &quot;buf_size&quot;: &quot;32kB&quot;</div>
<div class="line">      },</div>
<div class="line">      &quot;testing&quot;: {</div>
<div class="line">        &quot;enabled&quot;: true</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<p><code><a class="el" href="sensor__schemas_8json.html">sensor_schemas.json</a></code>: Sensor configuration </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;sensors&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;shaft_power&quot;,</div>
<div class="line">      &quot;data&quot;: {</div>
<div class="line">        &quot;packet_id&quot;: &quot;BIGINT&quot;,</div>
<div class="line">        &quot;time&quot;: &quot;TIMESTAMP&quot;,</div>
<div class="line">        &quot;rpm&quot;: &quot;DOUBLE PRECISION&quot;,</div>
<div class="line">        &quot;torque&quot;: &quot;DOUBLE PRECISION&quot;,</div>
<div class="line">        &quot;power&quot;: &quot;DOUBLE PRECISION&quot;,</div>
<div class="line">        &quot;peak_peak_pfs&quot;: &quot;DOUBLE PRECISION&quot;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Contributors</h1>
<p>Magnus Gjerstad, Ingar Asheim, Ole Fredrik Høivang Heggum </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 5 2025 19:34:39 for Sensor Data Handler System by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
